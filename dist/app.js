var s,e,t,n,a,i=require("express"),o=require("path"),r=require("fs"),c=require("firebase/database"),u=require("firebase/app"),l=require("dotenv"),p=o.resolve(__dirname,"../endpoints");l.config();const d={apiKey:process.env.API_KEY,authDomain:process.env.AUTH_DOMAIN,databaseURL:process.env.DB_URL,projectId:process.env.PROJECT_ID,storageBucket:process.env.STORAGE_BUCKET,messagingSenderId:process.env.MESSAGING_SENDER_ID,appId:process.env.APP_ID};a=u.initializeApp(d);const f=c.getDatabase(a),g=c.ref(f);e=async()=>(await c.get(c.child(g,"database/pictureGrid/"))).val(),t=async()=>{const s=[],e=(await c.get(c.child(g,"database/tables/"))).val();return Object.keys(e).forEach((t=>{s.push({tableName:t,seatList:e[t]})})),s},n=async()=>{const s=(await c.get(c.child(g,"database/wishes/"))).val(),e=[];return Object.keys(s).forEach((t=>{e.push(s[t])})),e};const y=i.Router();y.use(i.json()),y.get("/fetchpics",(async function(s,t,n){const a=o.join(h,"pics.json");if(r.existsSync(a))return t.status(200).sendFile(a);const i=await e();return r.writeFile(a,JSON.stringify(i),(s=>{s&&console.log(s)})),t.status(201).json(i)})),y.get("/fetchtables",(async function(s,e,n){const a=o.join(h,"tables.json");if(r.existsSync(a))return e.status(200).sendFile(a);const i=await t();return r.writeFile(a,JSON.stringify(i),(s=>{s&&console.log(s)})),e.status(201).json(i)})),y.get("/fetchwishes",(async function(s,e,t){const a=o.join(h,"wishes.json");if(r.existsSync(a))return e.status(200).sendFile(a);const i=await n();return r.writeFile(a,JSON.stringify(i),(s=>{s&&console.log(s)})),e.status(201).json(i)})),y.post("/post/makewish",(async function(s,e,t){o.join(h,"wishes.json");return console.log(s.body),e.send(s.body)})),s=y;const h=o.join(p,"..","jsonData");const j=i();j.use("/api-endpoints",s),j.listen(8080);
//# sourceMappingURL=app.js.map
